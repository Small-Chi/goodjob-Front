(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UserChats"],{c467:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Chats"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"chatlist"},[s("v-card",{staticClass:"mx-auto",attrs:{rounded:"","max-width":"300",tile:""}},[s("v-list",{staticClass:"list",attrs:{rounded:"",color:"var(--color-deepblue)"}},[s("v-subheader",[t._v("發案者")]),s("v-list-item-group",{attrs:{color:"var(--color-lightY)"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.owners,(function(e){return s("v-list-item",{key:e.ownername,staticClass:"mb-3"},[s("v-avatar",{staticClass:"me-5",attrs:{size:"40"}},[s("v-img",{attrs:{src:"https://source.boringavatars.com/beam/120/"+e.account}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.ownername)}})],1)],1)})),1)],1)],1)],1),s("div",{staticClass:"main"},[void 0===t.selected?s("h1",{staticClass:"text"},[t._v("請選擇訊息對象")]):s("Chat",{key:t.selected,attrs:{member:t.owner[t.selected]}})],1)])])},r=[],n=s("1da1"),i=(s("96cf"),s("e6b0")),c={components:{Chat:i["a"]},data:function(){return{selected:void 0,owners:[],me:!1}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.me=t.user._id===t.$route.params.id,t.me){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.api.get("/owners/visitor");case 6:s=e.sent,a=s.data,t.owners=a.result,console.log(a.result),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),t.$swal({icon:"error",title:"失敗",text:"取得訊息失敗"});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))()},computed:{user:function(){return this.$store.getters["user/user"]},owner:function(){return this.$store.getters["owner/owner"]}},methods:{userlogout:function(){this.$store.dispatch("user/userlogout")},ownerlogout:function(){this.$store.dispatch("owner/ownerlogout")}}},o=c,l=s("2877"),u=s("6544"),d=s.n(u),m=s("8212"),v=s("b0af"),p=s("adda"),h=s("8860"),b=s("da13"),g=s("5d23"),f=s("1baa"),x=s("e0c7"),C=Object(l["a"])(o,a,r,!1,null,null,null);e["default"]=C.exports;d()(C,{VAvatar:m["a"],VCard:v["a"],VImg:p["a"],VList:h["a"],VListItem:b["a"],VListItemContent:g["a"],VListItemGroup:f["a"],VListItemTitle:g["b"],VSubheader:x["a"]})},d79a:function(t,e,s){t.exports=s.p+"img/owner1.66c17efd.png"},e6b0:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"var(--color-blue)"}},[a("v-card",{staticClass:"mb-5 p-0",staticStyle:{border:"1px solid rgba(145, 167, 226, 0.5)"},attrs:{color:"var(--color-blue)"}},[a("div",{staticClass:"chatup"},[a("div",{staticClass:"row justify-space-between"},[a("div",{staticClass:"col-12 mt-5 d-flex justify-start align-center"},[a("img",{staticClass:"ms-3",attrs:{src:s("d79a"),height:"50"}}),a("span",{staticClass:"Umembermes mx-2"},[t._v(" 米米您好，我是「育達股份有限公司」，我們有一個書籍排版的案子，看過您的作品後覺得您的風格是我們所想要的，不知道是否能與您合作呢? ")])]),a("div",{staticClass:"col-12 mt-5 d-flex justify-end align-center"},[a("span",{staticClass:"Me-oneline mx-2"},[t._v("您好，請問貴司是什麼樣的行業性質呢?")]),a("img",{staticClass:"me-3",attrs:{src:s("b4ee"),height:"50"}})]),a("div",{staticClass:"col-12 mt-5 d-flex justify-start align-center"},[a("img",{staticClass:"ms-3",attrs:{src:s("d79a"),height:"50"}}),a("span",{staticClass:"Umembermes mx-2"},[t._v(" 我們是教育出版業，本次的案件風格想要活潑的設計風格， "),a("br"),t._v(" 這是我們的案件連結：http://localhost:8080/#/owner/62079e4e2c4d38014aa25124/casePage/621849fcc2c2a2920679e231 "),a("br"),t._v(" 請您過目。 ")])]),a("div",{staticClass:"col-12 mt-5 d-flex justify-end align-center"},[a("span",{staticClass:"Me-oneline mx-2"},[t._v("好的，我願意接這個案件，那我就按投稿囉，再請您查看並按同意，我們就可以正式開始合作")]),a("img",{staticClass:"me-3",attrs:{src:s("b4ee"),height:"50"}})]),a("div",{staticClass:"col-12 mt-5 d-flex justify-start align-center"},[a("img",{staticClass:"ms-3",attrs:{src:s("d79a"),height:"50"}}),a("span",{staticClass:"Umembermes mx-2"},[t._v("按同意囉~那麼檔案上傳中請稍後，看過內容後有什麼問題歡迎隨時發問，謝謝")])])])])]),a("v-card",{staticClass:"d-flex justify-space-between align-end mt-n10",staticStyle:{border:"1px solid rgba(145, 167, 226, 0.5)"},attrs:{color:"var(--color-blue)"}},[a("v-textarea",{staticClass:"ms-10 me-3 chatin",attrs:{name:"input-7-1"},on:{"click:append-outer":t.sendMessage,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),a("v-btn",{staticClass:"mesbtn",attrs:{icon:"",width:"50",height:"50"},on:{click:t.sendMessage}},[a("v-icon",{attrs:{size:"30",color:"var(--color-chatblue)"}},[t._v("mdi-send")])],1)],1)],1)},r=[],n=s("1da1"),i=(s("96cf"),{data:function(){return{text:"",sending:!1,messages:[],timer:0,fetchingOld:!1,fetchOldest:!1}},props:{Umember:{type:Object,default:function(){return{username:"",account:"",_id:""}}},Omember:{type:Object,default:function(){return{ownername:"",account:"",_id:""}}}},methods:{sendMessage:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.sending&&0!==t.text.length&&0!==t.Umember._id.length){e.next=2;break}return e.abrupt("return");case 2:return t.sending=!0,e.prev=3,e.next=6,t.api.post("/chats/Umembers/".concat(t.Umember._id,"/messages"),{text:t.text},{headers:{authorization:"Bearer "+t.user.token}});case 6:s=e.sent,a=s.data,t.messages.push(a.result),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),console.log(e.t0);case 14:t.sending=!1,t.text="";case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))()}}}),c=i,o=s("2877"),l=s("6544"),u=s.n(l),d=s("8336"),m=s("b0af"),v=s("132d"),p=s("a844"),h=Object(o["a"])(c,a,r,!1,null,null,null);e["a"]=h.exports;u()(h,{VBtn:d["a"],VCard:m["a"],VIcon:v["a"],VTextarea:p["a"]})}}]);
//# sourceMappingURL=UserChats.4809ae19.js.map